{
  "version": 3,
  "sources": [
    "/home/travis/build/qooxdoo/qxl.mobileshowcase/source/class/qxl/mobileshowcase/page/Theming.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "qxl",
    "mobileshowcase",
    "page",
    "Abstract",
    "construct",
    "setTitle",
    "__preloadThemes",
    "statics",
    "THEMES",
    "members",
    "__slider",
    "__demoImageLabel",
    "__appScale",
    "__fontScale",
    "i",
    "length",
    "cssResource",
    "css",
    "cssURI",
    "util",
    "ResourceManager",
    "getInstance",
    "toUri",
    "req",
    "bom",
    "request",
    "Xhr",
    "open",
    "send",
    "_initialize",
    "getContent",
    "add",
    "ui",
    "mobile",
    "form",
    "Title",
    "__createThemeChooser",
    "__createThemeScaleControl",
    "__createImageResolutionHandlingDemo",
    "event",
    "Registration",
    "addListener",
    "window",
    "_onChangeScale",
    "core",
    "Init",
    "getApplication",
    "getRoot",
    "_updateDemoImageLabel",
    "module",
    "Function",
    "debounce",
    "e",
    "root",
    "appScale",
    "getAppScale",
    "fontScale",
    "getFontScale",
    "fireEvent",
    "bind",
    "themeGroup",
    "Group",
    "themeForm",
    "Form",
    "themeRadioGroup",
    "RadioGroup",
    "radioButton",
    "RadioButton",
    "name",
    "__switchTheme",
    "renderer",
    "Single",
    "demoImage",
    "basic",
    "Image",
    "addCssClass",
    "Label",
    "demoImageGroup",
    "pixelRatio",
    "parseFloat",
    "client",
    "Device",
    "getDevicePixelRatio",
    "toFixed",
    "demoLabelTemplate",
    "labelContent",
    "lang",
    "String",
    "format",
    "__format",
    "setValue",
    "x",
    "replace",
    "slider",
    "Slider",
    "set",
    "useScaleButton",
    "Button",
    "_onApplyScaleButtonTap",
    "addButton",
    "scaleGroup",
    "setFontScale",
    "getValue",
    "lastValue",
    "getRouting",
    "executeGet",
    "reverse",
    "__changeCSS",
    "cssFile",
    "blocker",
    "Blocker",
    "blockerElement",
    "getContentElement",
    "element",
    "Style",
    "show",
    "Element",
    "_onAppFadedOut",
    "setTimeout",
    "removeListener",
    "self",
    "qxWeb",
    "setStyle",
    "remove",
    "newCssLink",
    "document",
    "createElement",
    "setAttribute",
    "append",
    "_onAppFadedIn",
    "hide",
    "arguments",
    "index",
    "appendTheme",
    "themeData",
    "push",
    "destruct",
    "Theming"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2012 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Christopher Zuendorf (czuendorf)\n\n************************************************************************ */\n\n/*\n * If you have added resources to your app remove the leading '*' in the\n * following line to make use of them.\n\n\n************************************************************************ */\n\n/**\n * Mobile page responsible for switching between provided themes.\n *\n * @asset(qx/mobile/css/*)\n */\nqx.Class.define(\"qxl.mobileshowcase.page.Theming\",\n{\n  extend : qxl.mobileshowcase.page.Abstract,\n\n  construct : function()\n  {\n    this.base(arguments, false);\n    this.setTitle(\"Theming\");\n\n    this.__preloadThemes();\n  },\n\n\n  statics :\n  {\n    THEMES: [{\n      \"name\": \"Indigo\",\n      \"css\": \"resource/qxl/mobileshowcase/css/indigo.css\"\n    }, {\n      \"name\": \"Flat\",\n      \"css\": \"resource/qxl/mobileshowcase/css/flat.css\"\n    }]\n  },\n\n\n  members :\n  {\n    __slider : null,\n    __demoImageLabel : null,\n    __appScale : null,\n    __fontScale : null,\n\n\n    /**\n     * Preloads all css files for preventing flickering on theme switches.\n     */\n    __preloadThemes : function() {\n      for(var i = 0; i < this.self(arguments).THEMES.length; i++) {\n        var cssResource = this.self(arguments).THEMES[i].css;\n        var cssURI = qx.util.ResourceManager.getInstance().toUri(cssResource);\n        var req = new qx.bom.request.Xhr();\n        req.open(\"GET\", cssURI);\n        req.send();\n      }\n    },\n\n\n    // overridden\n    _initialize : function()\n    {\n      this.base(arguments);\n\n      this.getContent().add(new qx.ui.mobile.form.Title(\"Select a theme\"));\n\n      this.__createThemeChooser();\n      this.__createThemeScaleControl();\n      this.__createImageResolutionHandlingDemo();\n\n      // react on possible font size changes (triggering a different device pixel ratio)\n      qx.event.Registration.addListener(window, \"resize\", this._onChangeScale);\n\n      qx.core.Init.getApplication().getRoot().addListener(\"changeAppScale\", this._updateDemoImageLabel, this);\n    },\n\n\n    /** Check on possible scale changes. */\n    _onChangeScale : qx.module.util.Function.debounce(function(e)\n    {\n      var root = qx.core.Init.getApplication().getRoot();\n\n      var appScale = root.getAppScale();\n      var fontScale = root.getFontScale();\n\n      if(appScale != this.__appScale || fontScale != this.__fontScale)\n      {\n        this.__appScale = appScale;\n        this.__fontScale = fontScale;\n\n        root.fireEvent(\"changeAppScale\");\n      }\n    }.bind(this), 200),\n\n\n    /** Creates the form which controls the chosen qx.Mobile theme. */\n    __createThemeChooser: function() {\n      var themeGroup = new qx.ui.mobile.form.Group([], false);\n      var themeForm = new qx.ui.mobile.form.Form();\n\n      var themeRadioGroup = new qx.ui.mobile.form.RadioGroup();\n      for (var i = 0; i < this.self(arguments).THEMES.length; i++) {\n        var radioButton = new qx.ui.mobile.form.RadioButton();\n        themeRadioGroup.add(radioButton);\n        themeForm.add(radioButton, this.self(arguments).THEMES[i].name);\n        radioButton.addListener(\"tap\", this.__switchTheme, {\n          \"self\": this,\n          \"index\": i\n        });\n      }\n      themeGroup.add(new qx.ui.mobile.form.renderer.Single(themeForm));\n      this.getContent().add(themeGroup);\n    },\n\n\n    /** Creates and adds the image resolution demonstration. */\n    __createImageResolutionHandlingDemo : function() {\n      this.getContent().add(new qx.ui.mobile.form.Title(\"Resolution-specific Images\"));\n      var demoImage = new qx.ui.mobile.basic.Image(\"qxl/mobileshowcase/icon/image.png\");\n      demoImage.addCssClass(\"resolution-demo-image\");\n\n      this.__demoImageLabel = new qx.ui.mobile.basic.Label();\n      this.__demoImageLabel.addCssClass(\"resolution-demo-label\");\n      this._updateDemoImageLabel();\n\n      var demoImageGroup = new qx.ui.mobile.form.Group();\n      demoImageGroup.add(demoImage);\n      demoImageGroup.add(this.__demoImageLabel);\n      this.getContent().add(demoImageGroup);\n    },\n\n\n   /**\n    * Refreshes the label which displays the pixel ratio, scale factor etc.\n    */\n    _updateDemoImageLabel : function()\n    {\n      var pixelRatio = parseFloat(qx.bom.client.Device.getDevicePixelRatio().toFixed(2));\n      var fontScale = qx.core.Init.getApplication().getRoot().getFontScale();\n      var appScale = qx.core.Init.getApplication().getRoot().getAppScale();\n\n      var demoLabelTemplate = \"<div>Best available image for total app scale<span>%1</span></div> <div><br/></div> <div>Device pixel ratio:<span>%2</span></div>  <div>Computed font scale:<span>%3</span></div> \";\n      var labelContent = qx.lang.String.format(demoLabelTemplate, [this.__format(appScale), this.__format(pixelRatio), this.__format(fontScale)]);\n\n      this.__demoImageLabel.setValue(labelContent);\n    },\n\n\n   /**\n    * Formats a number to one or two decimals as needed.\n    * @param x {Number}\n    * @return {String} the formatted number\n    */\n    __format : function(x)\n    {\n      if (x === null) {\n        return \"(unknown)\";\n      }\n\n      x = x.toFixed(2);\n      x = x.replace(/(\\d)0/, \"$1\");\n      return x;\n    },\n\n\n    /**\n     * Creates the a control widget for the theme's scale factor.\n     */\n    __createThemeScaleControl : function()\n    {\n      this.getContent().add(new qx.ui.mobile.form.Title(\"Adjust font scale\"));\n\n      var form = new qx.ui.mobile.form.Form();\n      var slider = this.__slider = new qx.ui.mobile.form.Slider();\n      slider.set({\n        \"displayValue\": \"value\",\n        \"minimum\": 50,\n        \"maximum\": 200,\n        \"value\": 100,\n        \"step\": 10\n      });\n      form.add(slider, \"Custom Font Scale in %\");\n\n      var useScaleButton = new qx.ui.mobile.form.Button(\"Apply\");\n      useScaleButton.addListener(\"tap\", this._onApplyScaleButtonTap, this);\n      form.addButton(useScaleButton);\n\n      var scaleGroup = new qx.ui.mobile.form.Group([new qx.ui.mobile.form.renderer.Single(form)],false);\n      this.getContent().add(scaleGroup);\n    },\n\n\n    /**\n    * Handler for \"tap\" event on applyScaleButton. Applies the app's root font size in relation to slider value.\n    */\n    _onApplyScaleButtonTap : function() {\n      qx.core.Init.getApplication().getRoot().setFontScale(this.__slider.getValue()/100);\n\n      this._updateDemoImageLabel();\n\n      var lastValue = this.__slider.getValue();\n      this.__slider.setValue(0);\n      this.__slider.setValue(lastValue);\n\n      qx.core.Init.getApplication().getRouting().executeGet(\"/theming\", {reverse:false});\n    },\n\n\n    /**\n     * Changes the used CSS of the application.\n     * @param cssFile {String} The css file url.\n     */\n    __changeCSS : function(cssFile) {\n      var blocker = qx.ui.mobile.core.Blocker.getInstance();\n      var blockerElement = blocker.getContentElement();\n\n      qx.bom.element.Style.set(blockerElement, \"transition\", \"all 500ms\");\n      qx.bom.element.Style.set(blockerElement, \"backgroundColor\", \"rgba(255,255,255,0)\");\n\n      blocker.show();\n\n      qx.bom.Element.addListener(blockerElement, \"transitionEnd\", this._onAppFadedOut, {\n        \"self\": this,\n        \"cssFile\": cssFile\n      });\n\n      setTimeout(function() {\n        qx.bom.element.Style.set(blockerElement, \"backgroundColor\", \"rgba(255,255,255,1)\");\n      }, 0);\n    },\n\n    /**\n     * Event handler when Application has faded out.\n     */\n    _onAppFadedOut: function() {\n      var blocker = qx.ui.mobile.core.Blocker.getInstance();\n      qx.bom.Element.removeListener(blocker.getContentElement(), \"transitionEnd\", this.self._onAppFadedOut, this);\n\n      var root = qxWeb(\".root\");\n      root.setStyle(\"color\",\"white\");\n\n      qxWeb(\"link[rel^='stylesheet']\")[0].remove();\n\n      var newCssLink = document.createElement(\"link\");\n      newCssLink.setAttribute(\"rel\", \"stylesheet\");\n      newCssLink.setAttribute(\"type\", \"text/css\");\n      newCssLink.setAttribute(\"href\", this.cssFile);\n\n      qxWeb(\"head\")[0].append(newCssLink);\n\n      root.setStyle(\"color\",null);\n\n      setTimeout(function() {\n        qx.bom.Element.addListener(blocker.getContentElement(), \"transitionEnd\", this.self._onAppFadedIn, this);\n        qx.bom.element.Style.set(blocker.getContentElement(), \"backgroundColor\", \"rgba(255,255,255,0)\");\n      }.bind(this), 100);\n    },\n\n\n    /**\n     * Event handler when Application has faded in again.\n     */\n    _onAppFadedIn: function() {\n      var blocker = qx.ui.mobile.core.Blocker.getInstance();\n      qx.bom.Element.removeListener(blocker.getContentElement(), \"transitionEnd\", this.self._onAppFadedIn, this);\n      qx.bom.element.Style.set(blocker.getContentElement(), \"transition\", null);\n      qx.bom.element.Style.set(blocker.getContentElement(), \"backgroundColor\", null);\n      blocker.hide();\n    },\n\n\n    /**\n     * Switches the theme of the application to the target theme.\n     * @param src {qx.ui.mobile.core.Widget} Source widget of this event.\n     */\n    __switchTheme : function() {\n      var cssResource = this.self.self(arguments).THEMES[this.index].css;\n      var cssURI = qx.util.ResourceManager.getInstance().toUri(cssResource);\n      this.self.__changeCSS(cssURI);\n    },\n\n\n    /**\n     * Adds a new theme data object to the theme switcher.\n     * @param cssFile {String} The css file url.\n     */\n    appendTheme : function(themeData) {\n      this.self(arguments).THEMES.push(themeData);\n    },\n\n\n    destruct : function()\n    {\n     qx.event.Registration.removeListener(window, \"resize\", this._onChangeScale);\n\n     qx.core.Init.getApplication().getRoot().removeListener(\"changeAppScale\", this._updateDemoImageLabel, this);\n    }\n  }\n});\n"
  ]
}